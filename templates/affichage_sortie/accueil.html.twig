{% extends 'base.html.twig' %}

{% block title %}{{parent()}}{% endblock %}

{% block body %}

    <main>
    <form>
        <h3>Filtrer les sorties</h3>
       <div>

           <label for="site_nom">Site:</label>
           <select name="site" id="site" class="form-control">
               {% for site in sites %}
                   <option value="{{ site.name }}">{{ site.name }}</option>
               {% endfor %}
           </select>

           <br>

           <label>Le nom de la sortie contient: </label>

           <input type="search" aria-label="Search through site content" ><br>

             <label>Entre </label>
             <input type="date" value="now">
             <label> et </label>
             <input type="date"><br>
       </div>
         <div>
            <label> <input type="checkbox" name="sortie_organisateur">Sorties dont je suis l'organisateur/trice</label><br>
            <label><input type="checkbox" name="sortie_inscrit">Sorties auxquelles je suis inscrit/e</label><br>
            <label><input type="checkbox" name="non_inscrit">Sorties auxquelles je ne suis pas inscrit/e</label><br>
            <label><input type="checkbox" name="sortie_passee">Sorties passées</label><br>

             <button type="submit"> Rechercher</button>
    </div>

    </form>

    <table  style="width: 100%"  border="1">
        <tr>
            <th>Nom de la sortie</th>
            <th>Date de la sortie</th>
            <th>Clôture</th>
            <th> inscrits/places</th>
            <th>Etat</th>
            <th>Inscrit</th>
            <th>Organisateur</th>
            <th>Actions</th>
        </tr>

            {% for sortie in sorties %}
        <tr>

            <td> <a href="{{ path('detail_sortie', {'id': sortie.id}) }}" title="{{ sortie.name  }}">
                    <span>{{ sortie.name  }}</span>
                </a> </td>
            <td>{{ sortie.dateDebut|date('Y-m-d H:i:s') }}</td>
            <td>{{ sortie.dateCloture|date('Y-m-d') }}</td>
            <td>{{ sortie.users.count }}/{{ sortie.nbInscriptionsMax }}</td>
            <td>{{ sortie.etat.libelle }}</td>
            <td> inscrit ?</td>
            <td>{{ sortie.organisateur.nom}}</td>
            <td><a href="{{ path('inscription_sortie', {'id' : sortie.id}) }}">S'inscrire</a></td>
        </tr>
            {% endfor %}

    </table>
    <a href="{{ path('sortie_creation') }}"><button type="submit">Créer une sortie</button></a>

    </main>
{% endblock %}


